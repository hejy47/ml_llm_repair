There is no clear indication of what the desired behavior is or what the problem with the function may be. Without further information, it is not possible to provide a fix for the function.