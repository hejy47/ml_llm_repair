{"org.jsoup.helper.W3CDom.W3CBuilder": {"buggy_content": "public W3CBuilder(Document doc) {\n    this.doc = doc;\n}", "method_range": "76-78", "fault_locations": "76,77"}, "org.jsoup.helper.W3CDom.head": {"buggy_content": "public void head(org.jsoup.nodes.Node source, int depth) {\n    if (source instanceof org.jsoup.nodes.Element) {\n        org.jsoup.nodes.Element sourceEl = (org.jsoup.nodes.Element) source;\n        String prefix = updateNamespaces(sourceEl);\n        String namespace = namespaces.get(prefix);\n        Element el = doc.createElementNS(namespace, sourceEl.tagName());\n        copyAttributes(sourceEl, el);\n        if (dest == null) {\n            // sets up the root\n            doc.appendChild(el);\n        } else {\n            dest.appendChild(el);\n        }\n        // descend\n        dest = el;\n    } else if (source instanceof org.jsoup.nodes.TextNode) {\n        org.jsoup.nodes.TextNode sourceText = (org.jsoup.nodes.TextNode) source;\n        Text text = doc.createTextNode(sourceText.getWholeText());\n        dest.appendChild(text);\n    } else if (source instanceof org.jsoup.nodes.Comment) {\n        org.jsoup.nodes.Comment sourceComment = (org.jsoup.nodes.Comment) source;\n        Comment comment = doc.createComment(sourceComment.getData());\n        dest.appendChild(comment);\n    } else if (source instanceof org.jsoup.nodes.DataNode) {\n        org.jsoup.nodes.DataNode sourceData = (org.jsoup.nodes.DataNode) source;\n        Text node = doc.createTextNode(sourceData.getWholeData());\n        dest.appendChild(node);\n    } else {\n        // unhandled\n    }\n}", "method_range": "80-110", "fault_locations": "80,83,84,85"}, "org.jsoup.helper.W3CDom.tail": {"buggy_content": "public void tail(org.jsoup.nodes.Node source, int depth) {\n    if (source instanceof org.jsoup.nodes.Element && dest.getParentNode() instanceof Element) {\n        // undescend. cromulent.\n        dest = (Element) dest.getParentNode();\n    }\n}", "method_range": "112-116", "fault_locations": "113,114"}, "org.jsoup.helper.W3CDom.updateNamespaces": {"buggy_content": "private String updateNamespaces(org.jsoup.nodes.Element el) {\n    // scan the element for namespace declarations\n    // like: xmlns=\"blah\" or xmlns:prefix=\"blah\"\n    Attributes attributes = el.attributes();\n    for (Attribute attr : attributes) {\n        String key = attr.getKey();\n        String prefix;\n        if (key.equals(xmlnsKey)) {\n            prefix = \"\";\n        } else if (key.startsWith(xmlnsPrefix)) {\n            prefix = key.substring(xmlnsPrefix.length());\n        } else {\n            continue;\n        }\n        namespaces.put(prefix, attr.getValue());\n    }\n    // get the element prefix if any\n    int pos = el.tagName().indexOf(\":\");\n    return pos > 0 ? el.tagName().substring(0, pos) : \"\";\n}", "method_range": "130-150", "fault_locations": "141,142,144"}}