{"org.apache.commons.lang.Entities.unescape": {"buggy_content": "public String unescape(String str) {\n    int firstAmp = str.indexOf('&');\n    if (firstAmp < 0) {\n        return str;\n    }\n    StringBuffer buf = new StringBuffer(str.length());\n    buf.append(str.substring(0, firstAmp));\n    for (int i = firstAmp; i < str.length(); ++i) {\n        char ch = str.charAt(i);\n        if (ch == '&') {\n            int semi = str.indexOf(';', i + 1);\n            if (semi == -1) {\n                buf.append(ch);\n                continue;\n            }\n            int amph = str.indexOf('&', i + 1);\n            if (amph != -1 && amph < semi) {\n                // Then the text looks like &...&...;\n                buf.append(ch);\n                continue;\n            }\n            String entityName = str.substring(i + 1, semi);\n            int entityValue;\n            if (entityName.length() == 0) {\n                entityValue = -1;\n            } else if (entityName.charAt(0) == '#') {\n                if (entityName.length() == 1) {\n                    entityValue = -1;\n                } else {\n                    char charAt1 = entityName.charAt(1);\n                    try {\n                        if (charAt1 == 'x' || charAt1 == 'X') {\n                            entityValue = Integer.valueOf(entityName.substring(2), 16).intValue();\n                        } else {\n                            entityValue = Integer.parseInt(entityName.substring(1));\n                        }\n                    } catch (NumberFormatException ex) {\n                        entityValue = -1;\n                    }\n                }\n            } else {\n                entityValue = this.entityValue(entityName);\n            }\n            if (entityValue == -1) {\n                buf.append('&');\n                buf.append(entityName);\n                buf.append(';');\n            } else {\n                buf.append((char) (entityValue));\n            }\n            i = semi;\n        } else {\n            buf.append(ch);\n        }\n    }\n    return buf.toString();\n}", "method_range": "813-870", "fault_locations": "845,846,848,851"}, "org.apache.commons.lang.Entities.unescape1": {"buggy_content": "public void unescape(Writer writer, String string) throws IOException {\n    int firstAmp = string.indexOf('&');\n    if (firstAmp < 0) {\n        writer.write(string);\n        return;\n    }\n    writer.write(string, 0, firstAmp);\n    int len = string.length();\n    for (int i = firstAmp; i < len; i++) {\n        char c = string.charAt(i);\n        if (c == '&') {\n            int nextIdx = i + 1;\n            int semiColonIdx = string.indexOf(';', nextIdx);\n            if (semiColonIdx == -1) {\n                writer.write(c);\n                continue;\n            }\n            int amphersandIdx = string.indexOf('&', i + 1);\n            if (amphersandIdx != -1 && amphersandIdx < semiColonIdx) {\n                // Then the text looks like &...&...;\n                writer.write(c);\n                continue;\n            }\n            String entityContent = string.substring(nextIdx, semiColonIdx);\n            int entityValue = -1;\n            int entityContentLen = entityContent.length();\n            if (entityContentLen > 0) {\n                if (entityContent.charAt(0) == '#') {\n                    //escaped value content is an integer (decimal or hexidecimal)\n                    if (entityContentLen > 1) {\n                        char isHexChar = entityContent.charAt(1);\n                        try {\n                            switch(isHexChar) {\n                                case 'X':\n                                case 'x':\n                                    {\n                                        entityValue = Integer.parseInt(entityContent.substring(2), 16);\n                                    }\n                                default:\n                                    {\n                                        entityValue = Integer.parseInt(entityContent.substring(1), 10);\n                                    }\n                            }\n                        } catch (NumberFormatException e) {\n                        }\n                    }\n                } else {\n                    //escaped value content is an entity name\n                    entityValue = this.entityValue(entityContent);\n                }\n            }\n            if (entityValue == -1) {\n                writer.write('&');\n                writer.write(entityContent);\n                writer.write(';');\n            } else {\n                writer.write(entityValue);\n            }\n            //move index up to the semi-colon\n            i = semiColonIdx;\n        } else {\n            writer.write(c);\n        }\n    }\n}", "method_range": "884-945", "fault_locations": "919,916,922"}}