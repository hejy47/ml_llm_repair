{"org.apache.commons.jxpath.ri.model.dom.DOMAttributeIterator.testAttr": {"buggy_content": "private boolean testAttr(Attr attr) {\n    String nodePrefix = DOMNodePointer.getPrefix(attr);\n    String nodeLocalName = DOMNodePointer.getLocalName(attr);\n    if (nodePrefix != null && nodePrefix.equals(\"xmlns\")) {\n        return false;\n    }\n    if (nodePrefix == null && nodeLocalName.equals(\"xmlns\")) {\n        return false;\n    }\n    String testLocalName = name.getName();\n    if (testLocalName.equals(\"*\") || testLocalName.equals(nodeLocalName)) {\n        String testPrefix = name.getPrefix();\n        if (equalStrings(testPrefix, nodePrefix)) {\n            return true;\n        }\n        String testNS = null;\n        if (testPrefix != null) {\n            testNS = parent.getNamespaceURI(testPrefix);\n        }\n        String nodeNS = null;\n        if (nodePrefix != null) {\n            nodeNS = parent.getNamespaceURI(nodePrefix);\n        }\n        return equalStrings(testNS, nodeNS);\n    }\n    return false;\n}", "method_range": "68-98", "fault_locations": "84,85,86,87,88,89,91,92,93,94,95"}, "org.apache.commons.jxpath.ri.model.dom.DOMAttributeIterator.getNodePointer": {"buggy_content": "public NodePointer getNodePointer() {\n    if (position == 0) {\n        if (!setPosition(1)) {\n            return null;\n        }\n        position = 0;\n    }\n    int index = position - 1;\n    if (index < 0) {\n        index = 0;\n    }\n    return new DOMAttributePointer(parent, (Attr) attributes.get(index));\n}", "method_range": "133-145", "fault_locations": "145"}, "org.apache.commons.jxpath.ri.model.jdom.JDOMAttributeIterator.JDOMAttributeIterator": {"buggy_content": "public JDOMAttributeIterator(NodePointer parent, QName name) {\n    this.parent = parent;\n    if (parent.getNode() instanceof Element) {\n        Element element = (Element) parent.getNode();\n        String prefix = name.getPrefix();\n        Namespace ns = null;\n        if (prefix != null) {\n            if (prefix.equals(\"xml\")) {\n                ns = Namespace.XML_NAMESPACE;\n            } else {\n                String uri = parent.getNamespaceResolver().getNamespaceURI(prefix);\n                if (uri != null) {\n                    ns = Namespace.getNamespace(prefix, uri);\n                }\n                if (ns == null) {\n                    // TBD: no attributes\n                    attributes = Collections.EMPTY_LIST;\n                    return;\n                }\n            }\n        } else {\n            ns = Namespace.NO_NAMESPACE;\n        }\n        String lname = name.getName();\n        if (!lname.equals(\"*\")) {\n            attributes = new ArrayList();\n            if (ns != null) {\n                Attribute attr = element.getAttribute(lname, ns);\n                if (attr != null) {\n                    attributes.add(attr);\n                }\n            }\n        } else {\n            attributes = new ArrayList();\n            List allAttributes = element.getAttributes();\n            for (int i = 0; i < allAttributes.size(); i++) {\n                Attribute attr = (Attribute) allAttributes.get(i);\n                if (attr.getNamespace().equals(ns)) {\n                    attributes.add(attr);\n                }\n            }\n        }\n    }\n}", "method_range": "41-88", "fault_locations": "70,74,79,80,82"}, "org.apache.commons.jxpath.ri.model.jdom.JDOMAttributeIterator.setPosition": {"buggy_content": "public boolean setPosition(int position) {\n    if (attributes == null) {\n        return false;\n    }\n    this.position = position;\n    return position >= 1 && position <= attributes.size();\n}", "method_range": "110-116", "fault_locations": "113,114"}}