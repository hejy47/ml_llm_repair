[{"output": "## Fixed Function 1\npublic Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List mappedDatasets = new ArrayList();\n    List includedAnnotations = new ArrayList();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                Object obj = iterator.next();\n                if (obj instanceof XYAnnotation) {\n                    XYAnnotation annotation = (XYAnnotation) obj;\n                    if (annotation instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(annotation);\n                    }\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n        if (rangeIndex == 0) {\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                Object obj = iterator.next();\n                if (obj instanceof XYAnnotation) {\n                    XYAnnotation annotation = (XYAnnotation) obj;\n                    if (annotation instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(annotation);\n                    }\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    Iterator datasetIterator = mappedDatasets.iterator();\n    while (datasetIterator.hasNext()) {\n        Object obj = datasetIterator.next();\n        if (obj instanceof XYDataset) {\n            XYDataset dataset = (XYDataset) obj;\n            if (dataset != null) {\n                XYItemRenderer renderer = getRendererForDataset(dataset);\n                if (isDomainAxis) {\n                    if (renderer != null) {\n                        result = Range.combine(result, renderer.findDomainBounds(dataset));\n                    } else {\n                        result = Range.combine(result, DatasetUtilities.findDomainBounds(dataset));\n                    }\n                } else {\n                    if (renderer != null) {\n                        result = Range.combine(result, renderer.findRangeBounds(dataset));\n                    } else {\n                        result = Range.combine(result, DatasetUtilities.findRangeBounds(dataset));\n                    }\n                    Collection annotationsCollection = renderer.getAnnotations();\n                    Iterator annotationIterator = annotationsCollection.iterator();\n                    while (annotationIterator.hasNext()) {\n                        Object annotationObj = annotationIterator.next();\n                        if (annotationObj instanceof XYAnnotation) {\n                            XYAnnotation annotation = (XYAnnotation) annotationObj;\n                            if (annotation instanceof XYAnnotationBoundsInfo) {\n                                includedAnnotations.add(annotation);\n                            }\n                        }\n                    }\n                }\n            }\n        }\n    }\n    Iterator annotationIterator = includedAnnotations.iterator();\n    while (annotationIterator.hasNext()) {\n        Object annotationObj = annotationIterator.next();\n        if (annotationObj instanceof XYAnnotationBoundsInfo) {\n            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) annotationObj;\n            if (xyabi.getIncludeInDataBounds()) {\n                if (isDomainAxis) {\n                    result = Range.combine(result, xyabi.getXRange());\n                } else {\n                    result = Range.combine(result, xyabi.getYRange());\n                }\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -12,9 +12,12 @@\n             // grab the plot's annotations\n             Iterator iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n-                if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                Object obj = iterator.next();\n+                if (obj instanceof XYAnnotation) {\n+                    XYAnnotation annotation = (XYAnnotation) obj;\n+                    if (annotation instanceof XYAnnotationBoundsInfo) {\n+                        includedAnnotations.add(annotation);\n+                    }\n                 }\n             }\n         }\n@@ -27,51 +30,63 @@\n         if (rangeIndex == 0) {\n             Iterator iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n-                if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                Object obj = iterator.next();\n+                if (obj instanceof XYAnnotation) {\n+                    XYAnnotation annotation = (XYAnnotation) obj;\n+                    if (annotation instanceof XYAnnotationBoundsInfo) {\n+                        includedAnnotations.add(annotation);\n+                    }\n                 }\n             }\n         }\n     }\n     // iterate through the datasets that map to the axis and get the union\n     // of the ranges.\n-    Iterator iterator = mappedDatasets.iterator();\n-    while (iterator.hasNext()) {\n-        XYDataset d = (XYDataset) iterator.next();\n-        if (d != null) {\n-            XYItemRenderer r = getRendererForDataset(d);\n-            if (isDomainAxis) {\n-                if (r != null) {\n-                    result = Range.combine(result, r.findDomainBounds(d));\n+    Iterator datasetIterator = mappedDatasets.iterator();\n+    while (datasetIterator.hasNext()) {\n+        Object obj = datasetIterator.next();\n+        if (obj instanceof XYDataset) {\n+            XYDataset dataset = (XYDataset) obj;\n+            if (dataset != null) {\n+                XYItemRenderer renderer = getRendererForDataset(dataset);\n+                if (isDomainAxis) {\n+                    if (renderer != null) {\n+                        result = Range.combine(result, renderer.findDomainBounds(dataset));\n+                    } else {\n+                        result = Range.combine(result, DatasetUtilities.findDomainBounds(dataset));\n+                    }\n                 } else {\n-                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n-                }\n-            } else {\n-                if (r != null) {\n-                    result = Range.combine(result, r.findRangeBounds(d));\n-                } else {\n-                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n-                }\n-            }\n-            Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n-            while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n-                if (a instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(a);\n+                    if (renderer != null) {\n+                        result = Range.combine(result, renderer.findRangeBounds(dataset));\n+                    } else {\n+                        result = Range.combine(result, DatasetUtilities.findRangeBounds(dataset));\n+                    }\n+                    Collection annotationsCollection = renderer.getAnnotations();\n+                    Iterator annotationIterator = annotationsCollection.iterator();\n+                    while (annotationIterator.hasNext()) {\n+                        Object annotationObj = annotationIterator.next();\n+                        if (annotationObj instanceof XYAnnotation) {\n+                            XYAnnotation annotation = (XYAnnotation) annotationObj;\n+                            if (annotation instanceof XYAnnotationBoundsInfo) {\n+                                includedAnnotations.add(annotation);\n+                            }\n+                        }\n+                    }\n                 }\n             }\n         }\n     }\n-    Iterator it = includedAnnotations.iterator();\n-    while (it.hasNext()) {\n-        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n-        if (xyabi.getIncludeInDataBounds()) {\n-            if (isDomainAxis) {\n-                result = Range.combine(result, xyabi.getXRange());\n-            } else {\n-                result = Range.combine(result, xyabi.getYRange());\n+    Iterator annotationIterator = includedAnnotations.iterator();\n+    while (annotationIterator.hasNext()) {\n+        Object annotationObj = annotationIterator.next();\n+        if (annotationObj instanceof XYAnnotationBoundsInfo) {\n+            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) annotationObj;\n+            if (xyabi.getIncludeInDataBounds()) {\n+                if (isDomainAxis) {\n+                    result = Range.combine(result, xyabi.getXRange());\n+                } else {\n+                    result = Range.combine(result, xyabi.getYRange());\n+                }\n             }\n         }\n     }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "public Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List<XYDataset> mappedDatasets = new ArrayList<>(); //added type parameter for List\n    List<XYAnnotation> includedAnnotations = new ArrayList<>(); //changed type of List\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex)); //no need to create Integer object\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            for (Object annotation : this.annotations) { //used enhanced for loop\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotation) annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex)); //no need to create Integer object\n        if (rangeIndex == 0) {\n            for (Object annotation : this.annotations) { //used enhanced for loop\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotation) annotation);\n                }\n            }\n        }\n    }\n    Iterator<XYDataset> iterator = mappedDatasets.iterator(); //added type parameter\n    while (iterator.hasNext()) {\n        XYDataset d = iterator.next();\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection<XYAnnotation> c = r.getAnnotations(); //added type parameter\n            Iterator<XYAnnotation> i = c.iterator(); //added type parameter\n            while (i.hasNext()) {\n                XYAnnotation a = i.next();\n                if (a instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(a);\n                }\n            }\n        }\n    }\n    Iterator<XYAnnotation> it = includedAnnotations.iterator(); //added type parameter\n    while (it.hasNext()) {\n        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n        if (xyabi.getIncludeInDataBounds()) {\n            if (isDomainAxis) {\n                result = Range.combine(result, xyabi.getXRange());\n            } else {\n                result = Range.combine(result, xyabi.getYRange());\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -1,20 +1,18 @@\n public Range getDataRange(ValueAxis axis) {\n     Range result = null;\n-    List mappedDatasets = new ArrayList();\n-    List includedAnnotations = new ArrayList();\n+    List<XYDataset> mappedDatasets = new ArrayList<>(); //added type parameter for List\n+    List<XYAnnotation> includedAnnotations = new ArrayList<>(); //changed type of List\n     boolean isDomainAxis = true;\n     // is it a domain axis?\n     int domainIndex = getDomainAxisIndex(axis);\n     if (domainIndex >= 0) {\n         isDomainAxis = true;\n-        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex)); //no need to create Integer object\n         if (domainIndex == 0) {\n             // grab the plot's annotations\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : this.annotations) { //used enhanced for loop\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotation) annotation);\n                 }\n             }\n         }\n@@ -23,22 +21,18 @@\n     int rangeIndex = getRangeAxisIndex(axis);\n     if (rangeIndex >= 0) {\n         isDomainAxis = false;\n-        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex)); //no need to create Integer object\n         if (rangeIndex == 0) {\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : this.annotations) { //used enhanced for loop\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotation) annotation);\n                 }\n             }\n         }\n     }\n-    // iterate through the datasets that map to the axis and get the union\n-    // of the ranges.\n-    Iterator iterator = mappedDatasets.iterator();\n+    Iterator<XYDataset> iterator = mappedDatasets.iterator(); //added type parameter\n     while (iterator.hasNext()) {\n-        XYDataset d = (XYDataset) iterator.next();\n+        XYDataset d = iterator.next();\n         if (d != null) {\n             XYItemRenderer r = getRendererForDataset(d);\n             if (isDomainAxis) {\n@@ -54,17 +48,17 @@\n                     result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                 }\n             }\n-            Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n+            Collection<XYAnnotation> c = r.getAnnotations(); //added type parameter\n+            Iterator<XYAnnotation> i = c.iterator(); //added type parameter\n             while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n+                XYAnnotation a = i.next();\n                 if (a instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(a);\n                 }\n             }\n         }\n     }\n-    Iterator it = includedAnnotations.iterator();\n+    Iterator<XYAnnotation> it = includedAnnotations.iterator(); //added type parameter\n     while (it.hasNext()) {\n         XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n         if (xyabi.getIncludeInDataBounds()) {\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "public Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List<XYDataset> mappedDatasets = new ArrayList<>();\n    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            for (Object annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotation) annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n        if (rangeIndex == 0) {\n            for (Object annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotation) annotation);\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    for (XYDataset d : mappedDatasets) {\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection<? extends XYAnnotation> c = r.getAnnotations();\n            for (XYAnnotation a : c) {\n                if (a instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(a);\n                }\n            }\n        }\n    }\n    for (XYAnnotationBoundsInfo xyabi : includedAnnotations) {\n        if (xyabi.getIncludeInDataBounds()) {\n            if (isDomainAxis) {\n                result = Range.combine(result, xyabi.getXRange());\n            } else {\n                result = Range.combine(result, xyabi.getYRange());\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -1,20 +1,18 @@\n public Range getDataRange(ValueAxis axis) {\n     Range result = null;\n-    List mappedDatasets = new ArrayList();\n-    List includedAnnotations = new ArrayList();\n+    List<XYDataset> mappedDatasets = new ArrayList<>();\n+    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n     boolean isDomainAxis = true;\n     // is it a domain axis?\n     int domainIndex = getDomainAxisIndex(axis);\n     if (domainIndex >= 0) {\n         isDomainAxis = true;\n-        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n         if (domainIndex == 0) {\n             // grab the plot's annotations\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotation) annotation);\n                 }\n             }\n         }\n@@ -23,22 +21,18 @@\n     int rangeIndex = getRangeAxisIndex(axis);\n     if (rangeIndex >= 0) {\n         isDomainAxis = false;\n-        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n         if (rangeIndex == 0) {\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotation) annotation);\n                 }\n             }\n         }\n     }\n     // iterate through the datasets that map to the axis and get the union\n     // of the ranges.\n-    Iterator iterator = mappedDatasets.iterator();\n-    while (iterator.hasNext()) {\n-        XYDataset d = (XYDataset) iterator.next();\n+    for (XYDataset d : mappedDatasets) {\n         if (d != null) {\n             XYItemRenderer r = getRendererForDataset(d);\n             if (isDomainAxis) {\n@@ -54,19 +48,15 @@\n                     result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                 }\n             }\n-            Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n-            while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n+            Collection<? extends XYAnnotation> c = r.getAnnotations();\n+            for (XYAnnotation a : c) {\n                 if (a instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(a);\n                 }\n             }\n         }\n     }\n-    Iterator it = includedAnnotations.iterator();\n-    while (it.hasNext()) {\n-        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n+    for (XYAnnotationBoundsInfo xyabi : includedAnnotations) {\n         if (xyabi.getIncludeInDataBounds()) {\n             if (isDomainAxis) {\n                 result = Range.combine(result, xyabi.getXRange());\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "public Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List<XYDataset> mappedDatasets = new ArrayList<>();\n    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            for (Object annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotation) annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n        if (rangeIndex == 0) {\n            for (Object annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotation) annotation);\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    for (XYDataset d : mappedDatasets) {\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection<XYAnnotation> c = r.getAnnotations();\n            for (XYAnnotation a : c) {\n                if (a instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(a);\n                }\n            }\n        }\n    }\n    for (XYAnnotation a : includedAnnotations) {\n        if (a instanceof XYAnnotationBoundsInfo) {\n            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) a;\n            if (xyabi.getIncludeInDataBounds()) {\n                if (isDomainAxis) {\n                    result = Range.combine(result, xyabi.getXRange());\n                } else {\n                    result = Range.combine(result, xyabi.getYRange());\n                }\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -1,20 +1,18 @@\n public Range getDataRange(ValueAxis axis) {\n     Range result = null;\n-    List mappedDatasets = new ArrayList();\n-    List includedAnnotations = new ArrayList();\n+    List<XYDataset> mappedDatasets = new ArrayList<>();\n+    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n     boolean isDomainAxis = true;\n     // is it a domain axis?\n     int domainIndex = getDomainAxisIndex(axis);\n     if (domainIndex >= 0) {\n         isDomainAxis = true;\n-        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n         if (domainIndex == 0) {\n             // grab the plot's annotations\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotation) annotation);\n                 }\n             }\n         }\n@@ -23,22 +21,18 @@\n     int rangeIndex = getRangeAxisIndex(axis);\n     if (rangeIndex >= 0) {\n         isDomainAxis = false;\n-        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n         if (rangeIndex == 0) {\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotation) annotation);\n                 }\n             }\n         }\n     }\n     // iterate through the datasets that map to the axis and get the union\n     // of the ranges.\n-    Iterator iterator = mappedDatasets.iterator();\n-    while (iterator.hasNext()) {\n-        XYDataset d = (XYDataset) iterator.next();\n+    for (XYDataset d : mappedDatasets) {\n         if (d != null) {\n             XYItemRenderer r = getRendererForDataset(d);\n             if (isDomainAxis) {\n@@ -54,24 +48,23 @@\n                     result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                 }\n             }\n-            Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n-            while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n+            Collection<XYAnnotation> c = r.getAnnotations();\n+            for (XYAnnotation a : c) {\n                 if (a instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(a);\n                 }\n             }\n         }\n     }\n-    Iterator it = includedAnnotations.iterator();\n-    while (it.hasNext()) {\n-        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n-        if (xyabi.getIncludeInDataBounds()) {\n-            if (isDomainAxis) {\n-                result = Range.combine(result, xyabi.getXRange());\n-            } else {\n-                result = Range.combine(result, xyabi.getYRange());\n+    for (XYAnnotation a : includedAnnotations) {\n+        if (a instanceof XYAnnotationBoundsInfo) {\n+            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) a;\n+            if (xyabi.getIncludeInDataBounds()) {\n+                if (isDomainAxis) {\n+                    result = Range.combine(result, xyabi.getXRange());\n+                } else {\n+                    result = Range.combine(result, xyabi.getYRange());\n+                }\n             }\n         }\n     }\n", "finish_reason": "stop", "valid": false, "num": 2}, {"output": "public Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List<XYDataset> mappedDatasets = new ArrayList<>();\n    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(Integer.valueOf(domainIndex)));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            Iterator<XYAnnotation> iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                XYAnnotation annotation = iterator.next();\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(Integer.valueOf(rangeIndex)));\n        if (rangeIndex == 0) {\n            Iterator<XYAnnotation> iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                XYAnnotation annotation = iterator.next();\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    Iterator<XYDataset> iterator = mappedDatasets.iterator();\n    while (iterator.hasNext()) {\n        XYDataset d = iterator.next();\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection<XYAnnotation> c = r.getAnnotations();\n            Iterator<XYAnnotation> i = c.iterator();\n            while (i.hasNext()) {\n                XYAnnotation a = i.next();\n                if (a instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(a);\n                }\n            }\n        }\n    }\n    Iterator<XYAnnotation> it = includedAnnotations.iterator();\n    while (it.hasNext()) {\n        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n        if (xyabi.getIncludeInDataBounds()) {\n            if (isDomainAxis) {\n                result = Range.combine(result, xyabi.getXRange());\n            } else {\n                result = Range.combine(result, xyabi.getYRange());\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -1,18 +1,18 @@\n public Range getDataRange(ValueAxis axis) {\n     Range result = null;\n-    List mappedDatasets = new ArrayList();\n-    List includedAnnotations = new ArrayList();\n+    List<XYDataset> mappedDatasets = new ArrayList<>();\n+    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n     boolean isDomainAxis = true;\n     // is it a domain axis?\n     int domainIndex = getDomainAxisIndex(axis);\n     if (domainIndex >= 0) {\n         isDomainAxis = true;\n-        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(Integer.valueOf(domainIndex)));\n         if (domainIndex == 0) {\n             // grab the plot's annotations\n-            Iterator iterator = this.annotations.iterator();\n+            Iterator<XYAnnotation> iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+                XYAnnotation annotation = iterator.next();\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(annotation);\n                 }\n@@ -23,11 +23,11 @@\n     int rangeIndex = getRangeAxisIndex(axis);\n     if (rangeIndex >= 0) {\n         isDomainAxis = false;\n-        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(Integer.valueOf(rangeIndex)));\n         if (rangeIndex == 0) {\n-            Iterator iterator = this.annotations.iterator();\n+            Iterator<XYAnnotation> iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+                XYAnnotation annotation = iterator.next();\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(annotation);\n                 }\n@@ -36,9 +36,9 @@\n     }\n     // iterate through the datasets that map to the axis and get the union\n     // of the ranges.\n-    Iterator iterator = mappedDatasets.iterator();\n+    Iterator<XYDataset> iterator = mappedDatasets.iterator();\n     while (iterator.hasNext()) {\n-        XYDataset d = (XYDataset) iterator.next();\n+        XYDataset d = iterator.next();\n         if (d != null) {\n             XYItemRenderer r = getRendererForDataset(d);\n             if (isDomainAxis) {\n@@ -54,17 +54,17 @@\n                     result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                 }\n             }\n-            Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n+            Collection<XYAnnotation> c = r.getAnnotations();\n+            Iterator<XYAnnotation> i = c.iterator();\n             while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n+                XYAnnotation a = i.next();\n                 if (a instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(a);\n                 }\n             }\n         }\n     }\n-    Iterator it = includedAnnotations.iterator();\n+    Iterator<XYAnnotation> it = includedAnnotations.iterator();\n     while (it.hasNext()) {\n         XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n         if (xyabi.getIncludeInDataBounds()) {\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "## Fixed Function 1\npublic Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List<XYDataset> mappedDatasets = new ArrayList<>();\n    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            for (XYAnnotation annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n        if (rangeIndex == 0) {\n            for (XYAnnotation annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    for (XYDataset d : mappedDatasets) {\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection<XYAnnotation> c = r.getAnnotations();\n            for (XYAnnotation a : c) {\n                if (a instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(a);\n                }\n            }\n        }\n    }\n    for (XYAnnotation a : includedAnnotations) {\n        if (a instanceof XYAnnotationBoundsInfo) {\n            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) a;\n            if (xyabi.getIncludeInDataBounds()) {\n                if (isDomainAxis) {\n                    result = Range.combine(result, xyabi.getXRange());\n                } else {\n                    result = Range.combine(result, xyabi.getYRange());\n                }\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -1,18 +1,16 @@\n public Range getDataRange(ValueAxis axis) {\n     Range result = null;\n-    List mappedDatasets = new ArrayList();\n-    List includedAnnotations = new ArrayList();\n+    List<XYDataset> mappedDatasets = new ArrayList<>();\n+    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n     boolean isDomainAxis = true;\n     // is it a domain axis?\n     int domainIndex = getDomainAxisIndex(axis);\n     if (domainIndex >= 0) {\n         isDomainAxis = true;\n-        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n         if (domainIndex == 0) {\n             // grab the plot's annotations\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (XYAnnotation annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(annotation);\n                 }\n@@ -23,11 +21,9 @@\n     int rangeIndex = getRangeAxisIndex(axis);\n     if (rangeIndex >= 0) {\n         isDomainAxis = false;\n-        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n         if (rangeIndex == 0) {\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (XYAnnotation annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(annotation);\n                 }\n@@ -36,9 +32,7 @@\n     }\n     // iterate through the datasets that map to the axis and get the union\n     // of the ranges.\n-    Iterator iterator = mappedDatasets.iterator();\n-    while (iterator.hasNext()) {\n-        XYDataset d = (XYDataset) iterator.next();\n+    for (XYDataset d : mappedDatasets) {\n         if (d != null) {\n             XYItemRenderer r = getRendererForDataset(d);\n             if (isDomainAxis) {\n@@ -54,24 +48,23 @@\n                     result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                 }\n             }\n-            Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n-            while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n+            Collection<XYAnnotation> c = r.getAnnotations();\n+            for (XYAnnotation a : c) {\n                 if (a instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(a);\n                 }\n             }\n         }\n     }\n-    Iterator it = includedAnnotations.iterator();\n-    while (it.hasNext()) {\n-        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n-        if (xyabi.getIncludeInDataBounds()) {\n-            if (isDomainAxis) {\n-                result = Range.combine(result, xyabi.getXRange());\n-            } else {\n-                result = Range.combine(result, xyabi.getYRange());\n+    for (XYAnnotation a : includedAnnotations) {\n+        if (a instanceof XYAnnotationBoundsInfo) {\n+            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) a;\n+            if (xyabi.getIncludeInDataBounds()) {\n+                if (isDomainAxis) {\n+                    result = Range.combine(result, xyabi.getXRange());\n+                } else {\n+                    result = Range.combine(result, xyabi.getYRange());\n+                }\n             }\n         }\n     }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "public Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List mappedDatasets = new ArrayList();\n    List includedAnnotations = new ArrayList();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                Object obj = iterator.next(); // use Object instead of XYAnnotation\n                if (obj instanceof XYAnnotation) {\n                    XYAnnotation annotation = (XYAnnotation) obj;\n                    if (annotation instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(annotation);\n                    }\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n        if (rangeIndex == 0) {\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                Object obj = iterator.next(); // use Object instead of XYAnnotation\n                if (obj instanceof XYAnnotation) {\n                    XYAnnotation annotation = (XYAnnotation) obj;\n                    if (annotation instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(annotation);\n                    }\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    Iterator iterator = mappedDatasets.iterator();\n    while (iterator.hasNext()) {\n        XYDataset d = (XYDataset) iterator.next();\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection c = r.getAnnotations();\n            Iterator i = c.iterator();\n            while (i.hasNext()) {\n                Object obj = i.next(); // use Object instead of XYAnnotation\n                if (obj instanceof XYAnnotation) {\n                    XYAnnotation a = (XYAnnotation) obj;\n                    if (a instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(a);\n                    }\n                }\n            }\n        }\n    }\n    Iterator it = includedAnnotations.iterator();\n    while (it.hasNext()) {\n        Object obj = it.next(); // use Object instead of XYAnnotation\n        if (obj instanceof XYAnnotationBoundsInfo) {\n            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) obj;\n            if (xyabi.getIncludeInDataBounds()) {\n                if (isDomainAxis) {\n                    result = Range.combine(result, xyabi.getXRange());\n                } else {\n                    result = Range.combine(result, xyabi.getYRange());\n                }\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -12,9 +12,12 @@\n             // grab the plot's annotations\n             Iterator iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n-                if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                Object obj = iterator.next(); // use Object instead of XYAnnotation\n+                if (obj instanceof XYAnnotation) {\n+                    XYAnnotation annotation = (XYAnnotation) obj;\n+                    if (annotation instanceof XYAnnotationBoundsInfo) {\n+                        includedAnnotations.add(annotation);\n+                    }\n                 }\n             }\n         }\n@@ -27,9 +30,12 @@\n         if (rangeIndex == 0) {\n             Iterator iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n-                if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                Object obj = iterator.next(); // use Object instead of XYAnnotation\n+                if (obj instanceof XYAnnotation) {\n+                    XYAnnotation annotation = (XYAnnotation) obj;\n+                    if (annotation instanceof XYAnnotationBoundsInfo) {\n+                        includedAnnotations.add(annotation);\n+                    }\n                 }\n             }\n         }\n@@ -57,21 +63,27 @@\n             Collection c = r.getAnnotations();\n             Iterator i = c.iterator();\n             while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n-                if (a instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(a);\n+                Object obj = i.next(); // use Object instead of XYAnnotation\n+                if (obj instanceof XYAnnotation) {\n+                    XYAnnotation a = (XYAnnotation) obj;\n+                    if (a instanceof XYAnnotationBoundsInfo) {\n+                        includedAnnotations.add(a);\n+                    }\n                 }\n             }\n         }\n     }\n     Iterator it = includedAnnotations.iterator();\n     while (it.hasNext()) {\n-        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n-        if (xyabi.getIncludeInDataBounds()) {\n-            if (isDomainAxis) {\n-                result = Range.combine(result, xyabi.getXRange());\n-            } else {\n-                result = Range.combine(result, xyabi.getYRange());\n+        Object obj = it.next(); // use Object instead of XYAnnotation\n+        if (obj instanceof XYAnnotationBoundsInfo) {\n+            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) obj;\n+            if (xyabi.getIncludeInDataBounds()) {\n+                if (isDomainAxis) {\n+                    result = Range.combine(result, xyabi.getXRange());\n+                } else {\n+                    result = Range.combine(result, xyabi.getYRange());\n+                }\n             }\n         }\n     }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "public Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List<XYDataset> mappedDatasets = new ArrayList<>();\n    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            for(XYAnnotation annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n        if (rangeIndex == 0) {\n            for(XYAnnotation annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    for (XYDataset d : mappedDatasets) {\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection<XYAnnotation> c = r.getAnnotations();\n            for (XYAnnotation a : c) {\n                if (a instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(a);\n                }\n            }\n        }\n    }\n    for (XYAnnotation a : includedAnnotations) {\n        if (a instanceof XYAnnotationBoundsInfo) {\n            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) a;\n            if (xyabi.getIncludeInDataBounds()) {\n                if (isDomainAxis) {\n                    result = Range.combine(result, xyabi.getXRange());\n                } else {\n                    result = Range.combine(result, xyabi.getYRange());\n                }\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -1,18 +1,16 @@\n public Range getDataRange(ValueAxis axis) {\n     Range result = null;\n-    List mappedDatasets = new ArrayList();\n-    List includedAnnotations = new ArrayList();\n+    List<XYDataset> mappedDatasets = new ArrayList<>();\n+    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n     boolean isDomainAxis = true;\n     // is it a domain axis?\n     int domainIndex = getDomainAxisIndex(axis);\n     if (domainIndex >= 0) {\n         isDomainAxis = true;\n-        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n         if (domainIndex == 0) {\n             // grab the plot's annotations\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for(XYAnnotation annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(annotation);\n                 }\n@@ -23,11 +21,9 @@\n     int rangeIndex = getRangeAxisIndex(axis);\n     if (rangeIndex >= 0) {\n         isDomainAxis = false;\n-        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n         if (rangeIndex == 0) {\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for(XYAnnotation annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(annotation);\n                 }\n@@ -36,9 +32,7 @@\n     }\n     // iterate through the datasets that map to the axis and get the union\n     // of the ranges.\n-    Iterator iterator = mappedDatasets.iterator();\n-    while (iterator.hasNext()) {\n-        XYDataset d = (XYDataset) iterator.next();\n+    for (XYDataset d : mappedDatasets) {\n         if (d != null) {\n             XYItemRenderer r = getRendererForDataset(d);\n             if (isDomainAxis) {\n@@ -54,24 +48,23 @@\n                     result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                 }\n             }\n-            Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n-            while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n+            Collection<XYAnnotation> c = r.getAnnotations();\n+            for (XYAnnotation a : c) {\n                 if (a instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(a);\n                 }\n             }\n         }\n     }\n-    Iterator it = includedAnnotations.iterator();\n-    while (it.hasNext()) {\n-        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n-        if (xyabi.getIncludeInDataBounds()) {\n-            if (isDomainAxis) {\n-                result = Range.combine(result, xyabi.getXRange());\n-            } else {\n-                result = Range.combine(result, xyabi.getYRange());\n+    for (XYAnnotation a : includedAnnotations) {\n+        if (a instanceof XYAnnotationBoundsInfo) {\n+            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) a;\n+            if (xyabi.getIncludeInDataBounds()) {\n+                if (isDomainAxis) {\n+                    result = Range.combine(result, xyabi.getXRange());\n+                } else {\n+                    result = Range.combine(result, xyabi.getYRange());\n+                }\n             }\n         }\n     }\n", "finish_reason": "stop", "valid": false, "num": 2}, {"output": "## Fixed Function 1\npublic Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List mappedDatasets = new ArrayList();\n    List includedAnnotations = new ArrayList();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                Object annotation = iterator.next();\n                if (annotation instanceof XYAnnotation && annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n        if (rangeIndex == 0) {\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                Object annotation = iterator.next();\n                if (annotation instanceof XYAnnotation && annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    Iterator iterator = mappedDatasets.iterator();\n    while (iterator.hasNext()) {\n        XYDataset d = (XYDataset) iterator.next();\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            if (r != null) {\n                Collection c = r.getAnnotations();\n                Iterator i = c.iterator();\n                while (i.hasNext()) {\n                    Object obj = i.next();\n                    if (obj instanceof XYAnnotation && obj instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(obj);\n                    }\n                }\n            }\n        }\n    }\n    Iterator it = includedAnnotations.iterator();\n    while (it.hasNext()) {\n        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n        if (xyabi.getIncludeInDataBounds()) {\n            if (isDomainAxis) {\n                result = Range.combine(result, xyabi.getXRange());\n            } else {\n                result = Range.combine(result, xyabi.getYRange());\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -12,8 +12,8 @@\n             // grab the plot's annotations\n             Iterator iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n-                if (annotation instanceof XYAnnotationBoundsInfo) {\n+                Object annotation = iterator.next();\n+                if (annotation instanceof XYAnnotation && annotation instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(annotation);\n                 }\n             }\n@@ -27,8 +27,8 @@\n         if (rangeIndex == 0) {\n             Iterator iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n-                if (annotation instanceof XYAnnotationBoundsInfo) {\n+                Object annotation = iterator.next();\n+                if (annotation instanceof XYAnnotation && annotation instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(annotation);\n                 }\n             }\n@@ -54,12 +54,14 @@\n                     result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                 }\n             }\n-            Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n-            while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n-                if (a instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(a);\n+            if (r != null) {\n+                Collection c = r.getAnnotations();\n+                Iterator i = c.iterator();\n+                while (i.hasNext()) {\n+                    Object obj = i.next();\n+                    if (obj instanceof XYAnnotation && obj instanceof XYAnnotationBoundsInfo) {\n+                        includedAnnotations.add(obj);\n+                    }\n                 }\n             }\n         }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "public Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List<XYDataset> mappedDatasets = new ArrayList<>();\n    List<XYAnnotationBoundsInfo> includedAnnotations = new ArrayList<>();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            for (Object annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotationBoundsInfo) annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n        if (rangeIndex == 0) {\n            for (Object annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotationBoundsInfo) annotation);\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    for (XYDataset d : mappedDatasets) {\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection<XYAnnotation> c = r.getAnnotations();\n            for (XYAnnotation a : c) {\n                if (a instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotationBoundsInfo) a);\n                }\n            }\n        }\n    }\n    for (XYAnnotationBoundsInfo xyabi : includedAnnotations) {\n        if (xyabi.getIncludeInDataBounds()) {\n            if (isDomainAxis) {\n                result = Range.combine(result, xyabi.getXRange());\n            } else {\n                result = Range.combine(result, xyabi.getYRange());\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -1,20 +1,18 @@\n public Range getDataRange(ValueAxis axis) {\n     Range result = null;\n-    List mappedDatasets = new ArrayList();\n-    List includedAnnotations = new ArrayList();\n+    List<XYDataset> mappedDatasets = new ArrayList<>();\n+    List<XYAnnotationBoundsInfo> includedAnnotations = new ArrayList<>();\n     boolean isDomainAxis = true;\n     // is it a domain axis?\n     int domainIndex = getDomainAxisIndex(axis);\n     if (domainIndex >= 0) {\n         isDomainAxis = true;\n-        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n         if (domainIndex == 0) {\n             // grab the plot's annotations\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotationBoundsInfo) annotation);\n                 }\n             }\n         }\n@@ -23,22 +21,18 @@\n     int rangeIndex = getRangeAxisIndex(axis);\n     if (rangeIndex >= 0) {\n         isDomainAxis = false;\n-        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n         if (rangeIndex == 0) {\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotationBoundsInfo) annotation);\n                 }\n             }\n         }\n     }\n     // iterate through the datasets that map to the axis and get the union\n     // of the ranges.\n-    Iterator iterator = mappedDatasets.iterator();\n-    while (iterator.hasNext()) {\n-        XYDataset d = (XYDataset) iterator.next();\n+    for (XYDataset d : mappedDatasets) {\n         if (d != null) {\n             XYItemRenderer r = getRendererForDataset(d);\n             if (isDomainAxis) {\n@@ -54,19 +48,15 @@\n                     result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                 }\n             }\n-            Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n-            while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n+            Collection<XYAnnotation> c = r.getAnnotations();\n+            for (XYAnnotation a : c) {\n                 if (a instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(a);\n+                    includedAnnotations.add((XYAnnotationBoundsInfo) a);\n                 }\n             }\n         }\n     }\n-    Iterator it = includedAnnotations.iterator();\n-    while (it.hasNext()) {\n-        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n+    for (XYAnnotationBoundsInfo xyabi : includedAnnotations) {\n         if (xyabi.getIncludeInDataBounds()) {\n             if (isDomainAxis) {\n                 result = Range.combine(result, xyabi.getXRange());\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "public Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List mappedDatasets = new ArrayList();\n    List includedAnnotations = new ArrayList();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                Object obj = iterator.next();\n                if (obj instanceof XYAnnotation) {\n                    XYAnnotation annotation = (XYAnnotation) obj;\n                    if (annotation instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(annotation);\n                    }\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n        if (rangeIndex == 0) {\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                Object obj = iterator.next();\n                if (obj instanceof XYAnnotation) {\n                    XYAnnotation annotation = (XYAnnotation) obj;\n                    if (annotation instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(annotation);\n                    }\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    Iterator iterator = mappedDatasets.iterator();\n    while (iterator.hasNext()) {\n        XYDataset d = (XYDataset) iterator.next();\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection c = r.getAnnotations();\n            Iterator i = c.iterator();\n            while (i.hasNext()) {\n                Object obj = i.next();\n                if (obj instanceof XYAnnotation) {\n                    XYAnnotation a = (XYAnnotation) obj;\n                    if (a instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(a);\n                    }\n                }\n            }\n        }\n    }\n    Iterator it = includedAnnotations.iterator();\n    while (it.hasNext()) {\n        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n        if (xyabi.getIncludeInDataBounds()) {\n            if (isDomainAxis) {\n                result = Range.combine(result, xyabi.getXRange());\n            } else {\n                result = Range.combine(result, xyabi.getYRange());\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -12,9 +12,12 @@\n             // grab the plot's annotations\n             Iterator iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n-                if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                Object obj = iterator.next();\n+                if (obj instanceof XYAnnotation) {\n+                    XYAnnotation annotation = (XYAnnotation) obj;\n+                    if (annotation instanceof XYAnnotationBoundsInfo) {\n+                        includedAnnotations.add(annotation);\n+                    }\n                 }\n             }\n         }\n@@ -27,9 +30,12 @@\n         if (rangeIndex == 0) {\n             Iterator iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n-                if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                Object obj = iterator.next();\n+                if (obj instanceof XYAnnotation) {\n+                    XYAnnotation annotation = (XYAnnotation) obj;\n+                    if (annotation instanceof XYAnnotationBoundsInfo) {\n+                        includedAnnotations.add(annotation);\n+                    }\n                 }\n             }\n         }\n@@ -57,9 +63,12 @@\n             Collection c = r.getAnnotations();\n             Iterator i = c.iterator();\n             while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n-                if (a instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(a);\n+                Object obj = i.next();\n+                if (obj instanceof XYAnnotation) {\n+                    XYAnnotation a = (XYAnnotation) obj;\n+                    if (a instanceof XYAnnotationBoundsInfo) {\n+                        includedAnnotations.add(a);\n+                    }\n                 }\n             }\n         }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "public Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List mappedDatasets = new ArrayList();\n    List includedAnnotations = new ArrayList();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                XYAnnotation annotation = (XYAnnotation) iterator.next();\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n        if (rangeIndex == 0) {\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                XYAnnotation annotation = (XYAnnotation) iterator.next();\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    Iterator iterator = mappedDatasets.iterator();\n    while (iterator.hasNext()) {\n        XYDataset d = (XYDataset) iterator.next();\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    Range domainBounds = r.findDomainBounds(d);\n                    if (domainBounds != null) {\n                        result = Range.combine(result, domainBounds);\n                    }\n                } else {\n                    Range domainBounds = DatasetUtilities.findDomainBounds(d);\n                    if (domainBounds != null) {\n                        result = Range.combine(result, domainBounds);\n                    }\n                }\n            } else {\n                if (r != null) {\n                    Range rangeBounds = r.findRangeBounds(d);\n                    if (rangeBounds != null) {\n                        result = Range.combine(result, rangeBounds);\n                    }\n                } else {\n                    Range rangeBounds = DatasetUtilities.findRangeBounds(d);\n                    if (rangeBounds != null) {\n                        result = Range.combine(result, rangeBounds);\n                    }\n                }\n            }\n            Collection c = r.getAnnotations();\n            Iterator i = c.iterator();\n            while (i.hasNext()) {\n                XYAnnotation a = (XYAnnotation) i.next();\n                if (a instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(a);\n                }\n            }\n        }\n    }\n    Iterator it = includedAnnotations.iterator();\n    while (it.hasNext()) {\n        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n        if (xyabi.getIncludeInDataBounds()) {\n            if (isDomainAxis) {\n                result = Range.combine(result, xyabi.getXRange());\n            } else {\n                result = Range.combine(result, xyabi.getYRange());\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -43,15 +43,27 @@\n             XYItemRenderer r = getRendererForDataset(d);\n             if (isDomainAxis) {\n                 if (r != null) {\n-                    result = Range.combine(result, r.findDomainBounds(d));\n+                    Range domainBounds = r.findDomainBounds(d);\n+                    if (domainBounds != null) {\n+                        result = Range.combine(result, domainBounds);\n+                    }\n                 } else {\n-                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n+                    Range domainBounds = DatasetUtilities.findDomainBounds(d);\n+                    if (domainBounds != null) {\n+                        result = Range.combine(result, domainBounds);\n+                    }\n                 }\n             } else {\n                 if (r != null) {\n-                    result = Range.combine(result, r.findRangeBounds(d));\n+                    Range rangeBounds = r.findRangeBounds(d);\n+                    if (rangeBounds != null) {\n+                        result = Range.combine(result, rangeBounds);\n+                    }\n                 } else {\n-                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n+                    Range rangeBounds = DatasetUtilities.findRangeBounds(d);\n+                    if (rangeBounds != null) {\n+                        result = Range.combine(result, rangeBounds);\n+                    }\n                 }\n             }\n             Collection c = r.getAnnotations();\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "## Fixed Function 1\npublic Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List mappedDatasets = new ArrayList();\n    List includedAnnotations = new ArrayList();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                Object a = iterator.next();\n                if (a instanceof XYAnnotation) {\n                    XYAnnotation annotation = (XYAnnotation) a;\n                    if (annotation instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(annotation);\n                    }\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n        if (rangeIndex == 0) {\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                Object a = iterator.next();\n                if (a instanceof XYAnnotation) {\n                    XYAnnotation annotation = (XYAnnotation) a;\n                    if (annotation instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(annotation);\n                    }\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    Iterator iterator = mappedDatasets.iterator();\n    while (iterator.hasNext()) {\n        XYDataset d = (XYDataset) iterator.next();\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection c = r.getAnnotations();\n            Iterator i = c.iterator();\n            while (i.hasNext()) {\n                Object a = i.next();\n                if (a instanceof XYAnnotation) {\n                    XYAnnotation annotation = (XYAnnotation) a;\n                    if (annotation instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(annotation);\n                    }\n                }\n            }\n        }\n    }\n    Iterator it = includedAnnotations.iterator();\n    while (it.hasNext()) {\n        Object a = it.next();\n        if (a instanceof XYAnnotationBoundsInfo) {\n            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) a;\n            if (xyabi.getIncludeInDataBounds()) {\n                if (isDomainAxis) {\n                    result = Range.combine(result, xyabi.getXRange());\n                } else {\n                    result = Range.combine(result, xyabi.getYRange());\n                }\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -12,9 +12,12 @@\n             // grab the plot's annotations\n             Iterator iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n-                if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                Object a = iterator.next();\n+                if (a instanceof XYAnnotation) {\n+                    XYAnnotation annotation = (XYAnnotation) a;\n+                    if (annotation instanceof XYAnnotationBoundsInfo) {\n+                        includedAnnotations.add(annotation);\n+                    }\n                 }\n             }\n         }\n@@ -27,9 +30,12 @@\n         if (rangeIndex == 0) {\n             Iterator iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n-                if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                Object a = iterator.next();\n+                if (a instanceof XYAnnotation) {\n+                    XYAnnotation annotation = (XYAnnotation) a;\n+                    if (annotation instanceof XYAnnotationBoundsInfo) {\n+                        includedAnnotations.add(annotation);\n+                    }\n                 }\n             }\n         }\n@@ -57,21 +63,27 @@\n             Collection c = r.getAnnotations();\n             Iterator i = c.iterator();\n             while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n-                if (a instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(a);\n+                Object a = i.next();\n+                if (a instanceof XYAnnotation) {\n+                    XYAnnotation annotation = (XYAnnotation) a;\n+                    if (annotation instanceof XYAnnotationBoundsInfo) {\n+                        includedAnnotations.add(annotation);\n+                    }\n                 }\n             }\n         }\n     }\n     Iterator it = includedAnnotations.iterator();\n     while (it.hasNext()) {\n-        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n-        if (xyabi.getIncludeInDataBounds()) {\n-            if (isDomainAxis) {\n-                result = Range.combine(result, xyabi.getXRange());\n-            } else {\n-                result = Range.combine(result, xyabi.getYRange());\n+        Object a = it.next();\n+        if (a instanceof XYAnnotationBoundsInfo) {\n+            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) a;\n+            if (xyabi.getIncludeInDataBounds()) {\n+                if (isDomainAxis) {\n+                    result = Range.combine(result, xyabi.getXRange());\n+                } else {\n+                    result = Range.combine(result, xyabi.getYRange());\n+                }\n             }\n         }\n     }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "public Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List<XYDataset> mappedDatasets = new ArrayList<>();\n    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            for (Object annotation : annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotation) annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n        if (rangeIndex == 0) {\n            for (Object annotation : annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotation) annotation);\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    for (XYDataset d : mappedDatasets) {\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection<XYAnnotation> c = r.getAnnotations();\n            for (XYAnnotation a : c) {\n                if (a instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(a);\n                }\n            }\n        }\n    }\n    for (XYAnnotation annotation : includedAnnotations) {\n        if (annotation instanceof XYAnnotationBoundsInfo) {\n            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) annotation;\n            if (xyabi.getIncludeInDataBounds()) {\n                if (isDomainAxis) {\n                    result = Range.combine(result, xyabi.getXRange());\n                } else {\n                    result = Range.combine(result, xyabi.getYRange());\n                }\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -1,20 +1,18 @@\n public Range getDataRange(ValueAxis axis) {\n     Range result = null;\n-    List mappedDatasets = new ArrayList();\n-    List includedAnnotations = new ArrayList();\n+    List<XYDataset> mappedDatasets = new ArrayList<>();\n+    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n     boolean isDomainAxis = true;\n     // is it a domain axis?\n     int domainIndex = getDomainAxisIndex(axis);\n     if (domainIndex >= 0) {\n         isDomainAxis = true;\n-        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n         if (domainIndex == 0) {\n             // grab the plot's annotations\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotation) annotation);\n                 }\n             }\n         }\n@@ -23,22 +21,18 @@\n     int rangeIndex = getRangeAxisIndex(axis);\n     if (rangeIndex >= 0) {\n         isDomainAxis = false;\n-        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n         if (rangeIndex == 0) {\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotation) annotation);\n                 }\n             }\n         }\n     }\n     // iterate through the datasets that map to the axis and get the union\n     // of the ranges.\n-    Iterator iterator = mappedDatasets.iterator();\n-    while (iterator.hasNext()) {\n-        XYDataset d = (XYDataset) iterator.next();\n+    for (XYDataset d : mappedDatasets) {\n         if (d != null) {\n             XYItemRenderer r = getRendererForDataset(d);\n             if (isDomainAxis) {\n@@ -54,24 +48,23 @@\n                     result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                 }\n             }\n-            Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n-            while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n+            Collection<XYAnnotation> c = r.getAnnotations();\n+            for (XYAnnotation a : c) {\n                 if (a instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(a);\n                 }\n             }\n         }\n     }\n-    Iterator it = includedAnnotations.iterator();\n-    while (it.hasNext()) {\n-        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n-        if (xyabi.getIncludeInDataBounds()) {\n-            if (isDomainAxis) {\n-                result = Range.combine(result, xyabi.getXRange());\n-            } else {\n-                result = Range.combine(result, xyabi.getYRange());\n+    for (XYAnnotation annotation : includedAnnotations) {\n+        if (annotation instanceof XYAnnotationBoundsInfo) {\n+            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) annotation;\n+            if (xyabi.getIncludeInDataBounds()) {\n+                if (isDomainAxis) {\n+                    result = Range.combine(result, xyabi.getXRange());\n+                } else {\n+                    result = Range.combine(result, xyabi.getYRange());\n+                }\n             }\n         }\n     }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "## Fixed Function 1\npublic Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List<XYDataset> mappedDatasets = new ArrayList<>();\n    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            for (Object annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotation)annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n        if (rangeIndex == 0) {\n            for (Object annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotation)annotation);\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    for (XYDataset d : mappedDatasets) {\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection<XYAnnotation> c = r.getAnnotations();\n            for (XYAnnotation a : c) {\n                if (a instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(a);\n                }\n            }\n        }\n    }\n    for (XYAnnotation a : includedAnnotations) {\n        if (a instanceof XYAnnotationBoundsInfo) {\n            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) a;\n            if (xyabi.getIncludeInDataBounds()) {\n                if (isDomainAxis) {\n                    result = Range.combine(result, xyabi.getXRange());\n                } else {\n                    result = Range.combine(result, xyabi.getYRange());\n                }\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -1,20 +1,18 @@\n public Range getDataRange(ValueAxis axis) {\n     Range result = null;\n-    List mappedDatasets = new ArrayList();\n-    List includedAnnotations = new ArrayList();\n+    List<XYDataset> mappedDatasets = new ArrayList<>();\n+    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n     boolean isDomainAxis = true;\n     // is it a domain axis?\n     int domainIndex = getDomainAxisIndex(axis);\n     if (domainIndex >= 0) {\n         isDomainAxis = true;\n-        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n         if (domainIndex == 0) {\n             // grab the plot's annotations\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotation)annotation);\n                 }\n             }\n         }\n@@ -23,22 +21,18 @@\n     int rangeIndex = getRangeAxisIndex(axis);\n     if (rangeIndex >= 0) {\n         isDomainAxis = false;\n-        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n         if (rangeIndex == 0) {\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotation)annotation);\n                 }\n             }\n         }\n     }\n     // iterate through the datasets that map to the axis and get the union\n     // of the ranges.\n-    Iterator iterator = mappedDatasets.iterator();\n-    while (iterator.hasNext()) {\n-        XYDataset d = (XYDataset) iterator.next();\n+    for (XYDataset d : mappedDatasets) {\n         if (d != null) {\n             XYItemRenderer r = getRendererForDataset(d);\n             if (isDomainAxis) {\n@@ -54,24 +48,23 @@\n                     result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                 }\n             }\n-            Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n-            while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n+            Collection<XYAnnotation> c = r.getAnnotations();\n+            for (XYAnnotation a : c) {\n                 if (a instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(a);\n                 }\n             }\n         }\n     }\n-    Iterator it = includedAnnotations.iterator();\n-    while (it.hasNext()) {\n-        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n-        if (xyabi.getIncludeInDataBounds()) {\n-            if (isDomainAxis) {\n-                result = Range.combine(result, xyabi.getXRange());\n-            } else {\n-                result = Range.combine(result, xyabi.getYRange());\n+    for (XYAnnotation a : includedAnnotations) {\n+        if (a instanceof XYAnnotationBoundsInfo) {\n+            XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) a;\n+            if (xyabi.getIncludeInDataBounds()) {\n+                if (isDomainAxis) {\n+                    result = Range.combine(result, xyabi.getXRange());\n+                } else {\n+                    result = Range.combine(result, xyabi.getYRange());\n+                }\n             }\n         }\n     }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "public Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List<XYDataset> mappedDatasets = new ArrayList<>();\n    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            Iterator<XYAnnotation> iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                XYAnnotation annotation = iterator.next();\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n        if (rangeIndex == 0) {\n            Iterator<XYAnnotation> iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                XYAnnotation annotation = iterator.next();\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    Iterator<XYDataset> iterator = mappedDatasets.iterator();\n    while (iterator.hasNext()) {\n        XYDataset d = iterator.next();\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection<XYAnnotation> c = r.getAnnotations();\n            Iterator<XYAnnotation> i = c.iterator();\n            while (i.hasNext()) {\n                XYAnnotation a = i.next();\n                if (a instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(a);\n                }\n            }\n        }\n    }\n    Iterator<XYAnnotation> it = includedAnnotations.iterator();\n    while (it.hasNext()) {\n        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n        if (xyabi.getIncludeInDataBounds()) {\n            if (isDomainAxis) {\n                result = Range.combine(result, xyabi.getXRange());\n            } else {\n                result = Range.combine(result, xyabi.getYRange());\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -1,18 +1,18 @@\n public Range getDataRange(ValueAxis axis) {\n     Range result = null;\n-    List mappedDatasets = new ArrayList();\n-    List includedAnnotations = new ArrayList();\n+    List<XYDataset> mappedDatasets = new ArrayList<>();\n+    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n     boolean isDomainAxis = true;\n     // is it a domain axis?\n     int domainIndex = getDomainAxisIndex(axis);\n     if (domainIndex >= 0) {\n         isDomainAxis = true;\n-        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n         if (domainIndex == 0) {\n             // grab the plot's annotations\n-            Iterator iterator = this.annotations.iterator();\n+            Iterator<XYAnnotation> iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+                XYAnnotation annotation = iterator.next();\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(annotation);\n                 }\n@@ -23,11 +23,11 @@\n     int rangeIndex = getRangeAxisIndex(axis);\n     if (rangeIndex >= 0) {\n         isDomainAxis = false;\n-        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n         if (rangeIndex == 0) {\n-            Iterator iterator = this.annotations.iterator();\n+            Iterator<XYAnnotation> iterator = this.annotations.iterator();\n             while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+                XYAnnotation annotation = iterator.next();\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(annotation);\n                 }\n@@ -36,9 +36,9 @@\n     }\n     // iterate through the datasets that map to the axis and get the union\n     // of the ranges.\n-    Iterator iterator = mappedDatasets.iterator();\n+    Iterator<XYDataset> iterator = mappedDatasets.iterator();\n     while (iterator.hasNext()) {\n-        XYDataset d = (XYDataset) iterator.next();\n+        XYDataset d = iterator.next();\n         if (d != null) {\n             XYItemRenderer r = getRendererForDataset(d);\n             if (isDomainAxis) {\n@@ -54,17 +54,17 @@\n                     result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                 }\n             }\n-            Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n+            Collection<XYAnnotation> c = r.getAnnotations();\n+            Iterator<XYAnnotation> i = c.iterator();\n             while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n+                XYAnnotation a = i.next();\n                 if (a instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(a);\n                 }\n             }\n         }\n     }\n-    Iterator it = includedAnnotations.iterator();\n+    Iterator<XYAnnotation> it = includedAnnotations.iterator();\n     while (it.hasNext()) {\n         XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n         if (xyabi.getIncludeInDataBounds()) {\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "## Fixed Function 1\npublic Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List mappedDatasets = new ArrayList();\n    List includedAnnotations = new ArrayList();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                XYAnnotation annotation = (XYAnnotation) iterator.next();\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n        if (rangeIndex == 0) {\n            Iterator iterator = this.annotations.iterator();\n            while (iterator.hasNext()) {\n                XYAnnotation annotation = (XYAnnotation) iterator.next();\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(annotation);\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    Iterator iterator = mappedDatasets.iterator();\n    while (iterator.hasNext()) {\n        XYDataset d = (XYDataset) iterator.next();\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    Range domainBounds = r.findDomainBounds(d);\n                    if (domainBounds != null) { // fix: check for null\n                        result = Range.combine(result, domainBounds);\n                    }\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    Range rangeBounds = r.findRangeBounds(d);\n                    if (rangeBounds != null) { // fix: check for null\n                        result = Range.combine(result, rangeBounds);\n                    }\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection c = r.getAnnotations();\n            if (c != null) { // fix: check for null\n                Iterator i = c.iterator();\n                while (i.hasNext()) {\n                    XYAnnotation a = (XYAnnotation) i.next();\n                    if (a instanceof XYAnnotationBoundsInfo) {\n                        includedAnnotations.add(a);\n                    }\n                }\n            }\n        }\n    }\n    Iterator it = includedAnnotations.iterator();\n    while (it.hasNext()) {\n        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n        if (xyabi.getIncludeInDataBounds()) {\n            if (isDomainAxis) {\n                Range xRange = xyabi.getXRange();\n                if (xRange != null) { // fix: check for null\n                    result = Range.combine(result, xRange);\n                }\n            } else {\n                Range yRange = xyabi.getYRange();\n                if (yRange != null) { // fix: check for null\n                    result = Range.combine(result, yRange);\n                }\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -43,23 +43,31 @@\n             XYItemRenderer r = getRendererForDataset(d);\n             if (isDomainAxis) {\n                 if (r != null) {\n-                    result = Range.combine(result, r.findDomainBounds(d));\n+                    Range domainBounds = r.findDomainBounds(d);\n+                    if (domainBounds != null) { // fix: check for null\n+                        result = Range.combine(result, domainBounds);\n+                    }\n                 } else {\n                     result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                 }\n             } else {\n                 if (r != null) {\n-                    result = Range.combine(result, r.findRangeBounds(d));\n+                    Range rangeBounds = r.findRangeBounds(d);\n+                    if (rangeBounds != null) { // fix: check for null\n+                        result = Range.combine(result, rangeBounds);\n+                    }\n                 } else {\n                     result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                 }\n             }\n             Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n-            while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n-                if (a instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(a);\n+            if (c != null) { // fix: check for null\n+                Iterator i = c.iterator();\n+                while (i.hasNext()) {\n+                    XYAnnotation a = (XYAnnotation) i.next();\n+                    if (a instanceof XYAnnotationBoundsInfo) {\n+                        includedAnnotations.add(a);\n+                    }\n                 }\n             }\n         }\n@@ -69,9 +77,15 @@\n         XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n         if (xyabi.getIncludeInDataBounds()) {\n             if (isDomainAxis) {\n-                result = Range.combine(result, xyabi.getXRange());\n+                Range xRange = xyabi.getXRange();\n+                if (xRange != null) { // fix: check for null\n+                    result = Range.combine(result, xRange);\n+                }\n             } else {\n-                result = Range.combine(result, xyabi.getYRange());\n+                Range yRange = xyabi.getYRange();\n+                if (yRange != null) { // fix: check for null\n+                    result = Range.combine(result, yRange);\n+                }\n             }\n         }\n     }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "public Range getDataRange(ValueAxis axis) {\n    Range result = null;\n    List<XYDataset> mappedDatasets = new ArrayList<>();\n    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n    boolean isDomainAxis = true;\n    // is it a domain axis?\n    int domainIndex = getDomainAxisIndex(axis);\n    if (domainIndex >= 0) {\n        isDomainAxis = true;\n        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n        if (domainIndex == 0) {\n            // grab the plot's annotations\n            for (Object annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotation) annotation);\n                }\n            }\n        }\n    }\n    // or is it a range axis?\n    int rangeIndex = getRangeAxisIndex(axis);\n    if (rangeIndex >= 0) {\n        isDomainAxis = false;\n        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n        if (rangeIndex == 0) {\n            for (Object annotation : this.annotations) {\n                if (annotation instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add((XYAnnotation) annotation);\n                }\n            }\n        }\n    }\n    // iterate through the datasets that map to the axis and get the union\n    // of the ranges.\n    Iterator<XYDataset> iterator = mappedDatasets.iterator();\n    while (iterator.hasNext()) {\n        XYDataset d = iterator.next();\n        if (d != null) {\n            XYItemRenderer r = getRendererForDataset(d);\n            if (isDomainAxis) {\n                if (r != null) {\n                    result = Range.combine(result, r.findDomainBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findDomainBounds(d));\n                }\n            } else {\n                if (r != null) {\n                    result = Range.combine(result, r.findRangeBounds(d));\n                } else {\n                    result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                }\n            }\n            Collection<? extends XYAnnotation> c = r.getAnnotations();\n            Iterator<? extends XYAnnotation> i = c.iterator();\n            while (i.hasNext()) {\n                XYAnnotation a = i.next();\n                if (a instanceof XYAnnotationBoundsInfo) {\n                    includedAnnotations.add(a);\n                }\n            }\n        }\n    }\n    Iterator<XYAnnotation> it = includedAnnotations.iterator();\n    while (it.hasNext()) {\n        XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n        if (xyabi.getIncludeInDataBounds()) {\n            if (isDomainAxis) {\n                result = Range.combine(result, xyabi.getXRange());\n            } else {\n                result = Range.combine(result, xyabi.getYRange());\n            }\n        }\n    }\n    return result;\n}", "diff": "--- org/jfree/chart/plot/XYPlot.javagetDataRange\n+++ org/jfree/chart/plot/XYPlot.javagetDataRange\n@@ -1,20 +1,18 @@\n public Range getDataRange(ValueAxis axis) {\n     Range result = null;\n-    List mappedDatasets = new ArrayList();\n-    List includedAnnotations = new ArrayList();\n+    List<XYDataset> mappedDatasets = new ArrayList<>();\n+    List<XYAnnotation> includedAnnotations = new ArrayList<>();\n     boolean isDomainAxis = true;\n     // is it a domain axis?\n     int domainIndex = getDomainAxisIndex(axis);\n     if (domainIndex >= 0) {\n         isDomainAxis = true;\n-        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(new Integer(domainIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToDomainAxis(domainIndex));\n         if (domainIndex == 0) {\n             // grab the plot's annotations\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotation) annotation);\n                 }\n             }\n         }\n@@ -23,22 +21,20 @@\n     int rangeIndex = getRangeAxisIndex(axis);\n     if (rangeIndex >= 0) {\n         isDomainAxis = false;\n-        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(new Integer(rangeIndex)));\n+        mappedDatasets.addAll(getDatasetsMappedToRangeAxis(rangeIndex));\n         if (rangeIndex == 0) {\n-            Iterator iterator = this.annotations.iterator();\n-            while (iterator.hasNext()) {\n-                XYAnnotation annotation = (XYAnnotation) iterator.next();\n+            for (Object annotation : this.annotations) {\n                 if (annotation instanceof XYAnnotationBoundsInfo) {\n-                    includedAnnotations.add(annotation);\n+                    includedAnnotations.add((XYAnnotation) annotation);\n                 }\n             }\n         }\n     }\n     // iterate through the datasets that map to the axis and get the union\n     // of the ranges.\n-    Iterator iterator = mappedDatasets.iterator();\n+    Iterator<XYDataset> iterator = mappedDatasets.iterator();\n     while (iterator.hasNext()) {\n-        XYDataset d = (XYDataset) iterator.next();\n+        XYDataset d = iterator.next();\n         if (d != null) {\n             XYItemRenderer r = getRendererForDataset(d);\n             if (isDomainAxis) {\n@@ -54,17 +50,17 @@\n                     result = Range.combine(result, DatasetUtilities.findRangeBounds(d));\n                 }\n             }\n-            Collection c = r.getAnnotations();\n-            Iterator i = c.iterator();\n+            Collection<? extends XYAnnotation> c = r.getAnnotations();\n+            Iterator<? extends XYAnnotation> i = c.iterator();\n             while (i.hasNext()) {\n-                XYAnnotation a = (XYAnnotation) i.next();\n+                XYAnnotation a = i.next();\n                 if (a instanceof XYAnnotationBoundsInfo) {\n                     includedAnnotations.add(a);\n                 }\n             }\n         }\n     }\n-    Iterator it = includedAnnotations.iterator();\n+    Iterator<XYAnnotation> it = includedAnnotations.iterator();\n     while (it.hasNext()) {\n         XYAnnotationBoundsInfo xyabi = (XYAnnotationBoundsInfo) it.next();\n         if (xyabi.getIncludeInDataBounds()) {\n", "finish_reason": "stop", "valid": false, "num": 1}]