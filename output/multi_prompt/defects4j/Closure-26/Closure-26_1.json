[{"output": "private void visitModuleExports(Node prop) {\n    String moduleName = guessCJSModuleName(prop.getSourceFileName());\n    Node module = prop.getFirstChild();\n    module.putProp(Node.ORIGINALNAME_PROP, \"module\");\n    module.setString(moduleName);\n    Node exports = prop.getLastChild();\n    exports.putProp(Node.ORIGINALNAME_PROP, \"exports\");\n    exports.setString(\"module$exports\");\n}", "diff": "--- com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n+++ com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n@@ -1,9 +1,9 @@\n private void visitModuleExports(Node prop) {\n     String moduleName = guessCJSModuleName(prop.getSourceFileName());\n-    Node module = prop.getChildAtIndex(0);\n+    Node module = prop.getFirstChild();\n     module.putProp(Node.ORIGINALNAME_PROP, \"module\");\n     module.setString(moduleName);\n-    Node exports = prop.getChildAtIndex(1);\n+    Node exports = prop.getLastChild();\n     exports.putProp(Node.ORIGINALNAME_PROP, \"exports\");\n     exports.setString(\"module$exports\");\n }\n", "finish_reason": "stop", "valid": false, "num": 13}, {"output": "private void visitModuleExports(Node prop) {\n    String moduleName = guessCJSModuleName(prop.getSourceFileName());\n    Node module = prop.getChildAtIndex(0);\n    Node moduleStringNode = Node.newString(moduleName);\n    moduleStringNode.copyProp(module, Node.MODULE_ALIAS_PROP);\n    module.replaceWith(moduleStringNode);\n    module.putProp(Node.ORIGINALNAME_PROP, \"module\");\n\n    Node exports = prop.getChildAtIndex(1);\n    Node exportsStringNode = Node.newString(\"module$exports\");\n    exportsStringNode.copyProp(exports, Node.MODULE_ALIAS_PROP);\n    exports.replaceWith(exportsStringNode);\n    exports.putProp(Node.ORIGINALNAME_PROP, \"exports\");\n}", "diff": "--- com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n+++ com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n@@ -1,9 +1,14 @@\n private void visitModuleExports(Node prop) {\n     String moduleName = guessCJSModuleName(prop.getSourceFileName());\n     Node module = prop.getChildAtIndex(0);\n+    Node moduleStringNode = Node.newString(moduleName);\n+    moduleStringNode.copyProp(module, Node.MODULE_ALIAS_PROP);\n+    module.replaceWith(moduleStringNode);\n     module.putProp(Node.ORIGINALNAME_PROP, \"module\");\n-    module.setString(moduleName);\n+\n     Node exports = prop.getChildAtIndex(1);\n+    Node exportsStringNode = Node.newString(\"module$exports\");\n+    exportsStringNode.copyProp(exports, Node.MODULE_ALIAS_PROP);\n+    exports.replaceWith(exportsStringNode);\n     exports.putProp(Node.ORIGINALNAME_PROP, \"exports\");\n-    exports.setString(\"module$exports\");\n }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "private void visitModuleExports(Node prop) {\n    String moduleName = guessCJSModuleName(prop.getSourceFileName());\n    Node module = prop.getFirstChild();\n    module.putProp(Node.ORIGINALNAME_PROP, \"module\");\n    module.setString(moduleName);\n    Node exports = prop.getSecondChild();\n    exports.putProp(Node.ORIGINALNAME_PROP, \"exports\");\n    exports.setString(\"module$exports\");\n}", "diff": "--- com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n+++ com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n@@ -1,9 +1,9 @@\n private void visitModuleExports(Node prop) {\n     String moduleName = guessCJSModuleName(prop.getSourceFileName());\n-    Node module = prop.getChildAtIndex(0);\n+    Node module = prop.getFirstChild();\n     module.putProp(Node.ORIGINALNAME_PROP, \"module\");\n     module.setString(moduleName);\n-    Node exports = prop.getChildAtIndex(1);\n+    Node exports = prop.getSecondChild();\n     exports.putProp(Node.ORIGINALNAME_PROP, \"exports\");\n     exports.setString(\"module$exports\");\n }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "private void visitModuleExports(Node prop) {\n    String moduleName = guessCJSModuleName(prop.getSourceFileName());\n    Node module = prop.removeFirstChild();\n    Node name = Node.newString(Token.NAME, \"module\", prop.getLineno());\n    module.addChildToFront(name);\n    module.putProp(Node.ORIGINALNAME_PROP, \"module\");\n    module.setString(moduleName);\n    Node exports = prop.removeFirstChild();\n    Node exportsName = Node.newString(Token.NAME, \"exports\", prop.getLineno());\n    exports.addChildToFront(exportsName);\n    exports.putProp(Node.ORIGINALNAME_PROP, \"exports\");\n    exports.setString(\"module$exports\");\n    prop.addChildToFront(exports);\n    prop.addChildToFront(module);\n}", "diff": "--- com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n+++ com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n@@ -1,9 +1,15 @@\n private void visitModuleExports(Node prop) {\n     String moduleName = guessCJSModuleName(prop.getSourceFileName());\n-    Node module = prop.getChildAtIndex(0);\n+    Node module = prop.removeFirstChild();\n+    Node name = Node.newString(Token.NAME, \"module\", prop.getLineno());\n+    module.addChildToFront(name);\n     module.putProp(Node.ORIGINALNAME_PROP, \"module\");\n     module.setString(moduleName);\n-    Node exports = prop.getChildAtIndex(1);\n+    Node exports = prop.removeFirstChild();\n+    Node exportsName = Node.newString(Token.NAME, \"exports\", prop.getLineno());\n+    exports.addChildToFront(exportsName);\n     exports.putProp(Node.ORIGINALNAME_PROP, \"exports\");\n     exports.setString(\"module$exports\");\n+    prop.addChildToFront(exports);\n+    prop.addChildToFront(module);\n }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "private void visitModuleExports(Node prop) {\n    String moduleName = guessCJSModuleName(prop.getSourceFileName());\n    Node module = prop.getFirstChild();\n    module.getProp(Node.ORIGINALNAME_PROP, \"module\");\n    module.setString(moduleName);\n    Node exports = prop.getLastChild();\n    exports.getProp(Node.ORIGINALNAME_PROP, \"exports\");\n    exports.setString(\"module$exports\");\n}", "diff": "--- com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n+++ com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n@@ -1,9 +1,9 @@\n private void visitModuleExports(Node prop) {\n     String moduleName = guessCJSModuleName(prop.getSourceFileName());\n-    Node module = prop.getChildAtIndex(0);\n-    module.putProp(Node.ORIGINALNAME_PROP, \"module\");\n+    Node module = prop.getFirstChild();\n+    module.getProp(Node.ORIGINALNAME_PROP, \"module\");\n     module.setString(moduleName);\n-    Node exports = prop.getChildAtIndex(1);\n-    exports.putProp(Node.ORIGINALNAME_PROP, \"exports\");\n+    Node exports = prop.getLastChild();\n+    exports.getProp(Node.ORIGINALNAME_PROP, \"exports\");\n     exports.setString(\"module$exports\");\n }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "private void visitModuleExports(Node prop) {\n    String moduleName = guessCJSModuleName(prop.getSourceFileName());\n    Node module = prop.getChildAtIndex(0);\n    module.putProp(Node.ORIGINALNAME_PROP, \"module\");\n    module.setString(moduleName);\n    Node exports = prop.getChildAtIndex(1);\n    exports.putProp(Node.ORIGINALNAME_PROP, \"exports\");\n    exports.setOriginalName(\"exports\"); // fixed line\n    exports.setString(\"module$exports\");\n}", "diff": "--- com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n+++ com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n@@ -5,5 +5,6 @@\n     module.setString(moduleName);\n     Node exports = prop.getChildAtIndex(1);\n     exports.putProp(Node.ORIGINALNAME_PROP, \"exports\");\n+    exports.setOriginalName(\"exports\"); // fixed line\n     exports.setString(\"module$exports\");\n }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "private void visitModuleExports(Node prop) {\n    String moduleName = guessCJSModuleName(prop.getSourceFileName());\n    Node module = prop.getChildAtIndex(0);\n    module.getProp(Node.ORIGINALNAME_PROP).setString(\"module\");\n    module.setString(moduleName);\n    Node exports = prop.getChildAtIndex(1);\n    exports.getProp(Node.ORIGINALNAME_PROP).setString(\"exports\");\n    exports.setString(\"module$exports\");\n}", "diff": "--- com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n+++ com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n@@ -1,9 +1,9 @@\n private void visitModuleExports(Node prop) {\n     String moduleName = guessCJSModuleName(prop.getSourceFileName());\n     Node module = prop.getChildAtIndex(0);\n-    module.putProp(Node.ORIGINALNAME_PROP, \"module\");\n+    module.getProp(Node.ORIGINALNAME_PROP).setString(\"module\");\n     module.setString(moduleName);\n     Node exports = prop.getChildAtIndex(1);\n-    exports.putProp(Node.ORIGINALNAME_PROP, \"exports\");\n+    exports.getProp(Node.ORIGINALNAME_PROP).setString(\"exports\");\n     exports.setString(\"module$exports\");\n }\n", "finish_reason": "stop", "valid": false, "num": 1}, {"output": "private void visitModuleExports(Node prop) {\n    String moduleName = guessCJSModuleName(prop.getSourceFileName());\n    Node module = prop.getChildAtIndex(0);\n    module.putProp(Node.ORIGINALNAME_PROP, null); // Clear ORIGINALNAME_PROP\n    module.setString(moduleName);\n    Node exports = prop.getChildAtIndex(1);\n    exports.putProp(Node.ORIGINALNAME_PROP, null); // Clear ORIGINALNAME_PROP\n    exports.setString(\"module$exports\");\n}", "diff": "--- com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n+++ com/google/javascript/jscomp/ProcessCommonJSModules.java@visitModuleExports\n@@ -1,9 +1,9 @@\n private void visitModuleExports(Node prop) {\n     String moduleName = guessCJSModuleName(prop.getSourceFileName());\n     Node module = prop.getChildAtIndex(0);\n-    module.putProp(Node.ORIGINALNAME_PROP, \"module\");\n+    module.putProp(Node.ORIGINALNAME_PROP, null); // Clear ORIGINALNAME_PROP\n     module.setString(moduleName);\n     Node exports = prop.getChildAtIndex(1);\n-    exports.putProp(Node.ORIGINALNAME_PROP, \"exports\");\n+    exports.putProp(Node.ORIGINALNAME_PROP, null); // Clear ORIGINALNAME_PROP\n     exports.setString(\"module$exports\");\n }\n", "finish_reason": "stop", "valid": false, "num": 1}]